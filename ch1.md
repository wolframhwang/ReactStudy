# 왜 리액트인가?

## JS Framework 

JS가 웹 어플리케이션에서 가장 핵심적인 역할을 하고있고, 서버 사이드, 모바일과 데스크톱 어플리케이션도 만들수 있다.

Slack, Atom, VS Code 등 유명한 데스크톱 어플리케이션을 일렉트론(JS로 데스크톱 어플리케이션을 만들수 있는 프레임워크)로  개발된 사례

결론적으로 어찌되었든 자바스크립트를 통해 규모가 큰 어플리케이션을 만들수 있는 시대가 되었고, 대규모 어플리케이션을 관리하기 위해서 어떻게 해야할지 고민 하던 것에 대한 것으로

프레임워크들이 개발되었다.

>  Angular, Backbone.js, Derby.js, Ember.js, Ext.js, Knockback.js, Sammy.js, PureMVC, Vue.js 등이 이에 해당한다.

## 그래서 왜 리액트인가?

앞서 언급되어있는 프레임워크들은 주로 MVC(Model View Controller), MVVM(Model View ViewModel), MVW(Model View Whatever) 구조를 사용한다.
이러한 구조가 가지고 있는 공통점은 모델과 뷰 가 있다는 것이다.

주로 모델은 데이터를 관리하는 영역이고, 뷰는 사용자에게 보여지는 영역이다.
그래서 사용자에게 프로그램이 Input을 받으면 컨트롤러는 모델 데이터를 조회, 수정 작업을 하고 그에 대한 사항을 뷰에 반영하게 된다.

그래서 다음 뷰가 있다고 생각해보자.
그리고 다음 코드와 같은 JSON 코드를 생각해보자.
```
{ 
  "title" : "Hello".
  "contents" : "Hello world",
  "author" : "velopert",
  "likes": 1,
}
<div id="post-1">
  <div class="title">Hello</div>
  <div class="contents">Hello world</div>
  <div class="author">velopert</div>
  <div class="likes">1</div>
</div>
```

결론적으로 likes값을 2로 업데이트 하면 어플리케이션에서 post-1에 likes 요소를 찾아 내부를 수정해야한다.
업데이트 하는 항목에 따라서 어떤부분을 찾아서 변경 할지 규칙을 정하는 작업은 간단하지만, 어플리케이션 규모가 커지면 이러한 작업이 복잡해지고 관리되지 않을 경우 성능이 떨어진다.

페이스북 개발팀이 이를 해결하기 위해 하나의 아이디어를 냈는데, 어떤 데이터가 변할때 마다 변화를 주는게 아니라, 기존 뷰를 아예 날려버리고 처음부터 렌더링을 새로 시작하는 방식이다.
이렇게 될 경우 구조가 매우 간단해지고, 작성해야할 코드가 줄어들게 된다.
여러모로 변화를 줄지에 대한 신경 역시 쓸 필요가 없어지게 된다.

히자만 이러한 방식은 CPU점유율이나 메모리 사용에 있어서 비효율적인 면이있는데, 이러한 것들을 아끼고 최대한 편안한 UX를 제공하기 위해 개발한것이 바로 리액트이다.


## 리액트

리액트는 자바 스크립트 라이브러리로 사용자 인터페이스를 만드는 데 사용한다.
구조가 MVC, MVW 등인 프레임워크와 달리 오직 V(View) 하나만 신경쓰는 라이브러리다.

리액트 프로젝트에서 특정 부분이 어떻게 생길지 정하는 선언체가 있는데 이를 컴포넌트(Component)라고 한다.

컴포넌트는 다른 프레임워크에서 사용자 인터페이스를 다룰 때 사용하는 템플릿과는 다른 개념이다.

템플릿 - 데이터 셋이 주어지면 HTML 태그 형식으로 문자열 반환
컴포넌트 - 재사용 가능한 API로 수많은 기능 내장하고 있고 컴포넌트 하나에서 생김새와 작동방식 정의

## 초기 렌더링

어떤 UI, 프레임 워크, 라이브러리든 처음에 보일지 정하는 초기 렌더링이 필요하다.
React에서는 이를 다루는 render 함수가 있다.
```
render() { ... }
```
이 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 한다.
html 형식의 문자열을 반환하지 않고 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환한다.
컴포넌트 내부에는 또 다른 컴포넌트들이 들어갈수도 있다.

이때 render 함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링 되게 된다.

최상위 컴포넌트의 렌더링이 끝나면 내부 정보를 토대로 HTML 마크업을 만들고 이를 실제 페이지의 DOM 요소 안에 주입한다.

## 조화 과정

리액트에서 뷰를 업데이트 할 때는 "업데이트 과정을 거친다" 라고 하기보다는 "조화 과정(reconciliation)을 거친다" 라고 얘기한다.
컴포넌트에서 데이터에 변화가 있을 때, 우리가 보기에는 변화에 따라 뷰가 변형되는 것처럼 보이지만 새로운 요소를 갈아 끼우기 때문이다.
이 작업 역시 render함수가 맡아서 한다.

컴포넌트는 데이터를 업데이트 했을 떄, 업데이트 한 값을 수정하는 것이 아니라 새로운 데이터를 가지고 render 함수를 호출해서 갈아 끼우는 형태로 뷰를 만들게 된다.
이때 render 함수가 반환하는 결과를 곧바로 DOM에 반영하지 않고 이전에 render함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교하게된다.

JS를 통해 두가지 뷰를 최소한의 연산으로 비교 한 후 둘의 차이를 알아낸 최소한의 연산으로 DOM 트리를 업데이트 하게된다.

리액트에서 Virtual DOM을 사용하면 실제 DOM에 접근하여 업데이트 하는 과정에는 세가지 절차를 밟는다.
1. 데이터를 업데이트 하면 전체 UI를 Virtual DOM에 리 렌더링 한다.
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교한다.
3. 바뀐 부분만 실제 DOM에 적용한다.

> Virtual DOM을 사용한다고 해서 사용하지 않을 때와 비교해서 무조건 빠른 것은 아니다.



